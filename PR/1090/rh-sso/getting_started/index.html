<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>Getting Started Guide</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.4"/><meta name="description" content="This guide helps you practice using Red Hat Single Sign-On to evaluate it before you use it in a production environment. It includes instructions for installing the Red Hat Single Sign-On server in standalone mode, creating accounts and realms for managing users and applications, and securing a JBoss EAP server application."/><link rel="next" href="#installing-standalone_" title="Chapter 1. Installing a sample instance of Red Hat Single Sign-On"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><div xml:lang="en-US" class="book" id="idm140607381360288"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Single Sign-On</span> <span class="productnumber">7.4</span></div><div><h1 class="title">Getting Started Guide</h1></div><div><h2 class="subtitle">For Use with Red Hat Single Sign-On 7.4</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat Customer Content Services</span></div></div><div><a href="#idm140607381444672">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				This guide helps you practice using Red Hat Single Sign-On to evaluate it before you use it in a production environment. It includes instructions for installing the Red Hat Single Sign-On server in standalone mode, creating accounts and realms for managing users and applications, and securing a JBoss EAP server application.
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="chapter"><a href="#installing-standalone_">1. Installing a sample instance of Red Hat Single Sign-On</a></span><ul><li><span class="section"><a href="#installing-server-product_">1.1. Installing the Red Hat Single Sign-On server</a></span></li><li><span class="section"><a href="#starting-server_">1.2. Starting the Red Hat Single Sign-On server</a></span></li><li><span class="section"><a href="#create-admin_">1.3. Creating the admin account</a></span></li><li><span class="section"><a href="#logging-in-admin-console_">1.4. Logging into the admin console</a></span></li></ul></li><li><span class="chapter"><a href="#creating-first-realm_">2. Creating a realm and a user</a></span><ul><li><span class="section"><a href="#realms-apps_">2.1. Realms and users</a></span></li><li><span class="section"><a href="#create-realm_">2.2. Creating a realm</a></span></li><li><span class="section"><a href="#create-user_">2.3. Creating a user</a></span></li><li><span class="section"><a href="#view-account_">2.4. Logging into the Account Console</a></span></li></ul></li><li><span class="chapter"><a href="#securing-sample-app_">3. Securing a sample application</a></span><ul><li><span class="section"><a href="#adjusting-ports_">3.1. Adjusting the port used by Red Hat Single Sign-On</a></span></li><li><span class="section"><a href="#installing-client-adapter_">3.2. Installing the JBoss EAP client adapter</a></span></li><li><span class="section"><a href="#registering-app_">3.3. Registering the JBoss EAP application</a></span></li><li><span class="section"><a href="#modifying-app_">3.4. Modifying the JBoss EAP instance</a></span></li><li><span class="section"><a href="#installing-sample-code_">3.5. Installing sample code to secure the application</a></span></li></ul></li></ul></div><section class="chapter" id="installing-standalone_"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Installing a sample instance of Red Hat Single Sign-On</h1></div></div></div><p>
			This section describes how to install and start a Red Hat Single Sign-On server in standalone mode, set up the initial admin user, and log in to the Red Hat Single Sign-On Admin Console.
		</p><div class="formalpara"><p class="title"><strong>Additional Resources</strong></p><p>
				This installation is intended for practice use of Red Hat Single Sign-On. For instructions on installation in a production environment and full details on all product features, see the other guides in the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_single_sign-on/7.4/">Red Hat Single Sign-On</a> documentation.
			</p></div><section class="section" id="installing-server-product_"><div class="titlepage"><div><div><h2 class="title">1.1. Installing the Red Hat Single Sign-On server</h2></div></div></div><p>
				For this sample instance of Red Hat Single Sign-On, this procedure involves installation in standalone mode. The server download ZIP file contains the scripts and binaries to run the Red Hat Single Sign-On server. You can install the server on Linux or Windows.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Go to the <a class="link" href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?downloadType=distributions&amp;product=core.service.rhsso">Red Hat customer portal</a>.
					</li><li class="listitem">
						Download the Red Hat Single Sign-On Server: <span class="strong strong"><strong>rh-sso-7.4.zip</strong></span>
					</li><li class="listitem">
						Place the file in a directory you choose.
					</li><li class="listitem"><p class="simpara">
						Unpack the ZIP file using the appropriate <code class="literal">unzip</code> utility, such as unzip, tar, or Expand-Archive.
					</p><div class="formalpara"><p class="title"><strong>Linux/Unix</strong></p><p>
							
<pre class="programlisting language-bash">$ unzip rhsso-7.4.zip

or

$ tar -xvzf rh-sso-7.4.tar.gz</pre>
						</p></div><div class="formalpara"><p class="title"><strong>Windows</strong></p><p>
							
<pre class="programlisting language-bash">&gt; Expand-Archive -Path 'C:Downloads\rhsso-7.4.zip` -DestinationPath 'C:\Downloads'</pre>
						</p></div></li></ol></div></section><section class="section" id="starting-server_"><div class="titlepage"><div><div><h2 class="title">1.2. Starting the Red Hat Single Sign-On server</h2></div></div></div><p>
				You start the server on the system where you installed it.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You saw no errors during the Red Hat Single Sign-On server installation.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Go to the <code class="literal">bin</code> directory of the server distribution.
					</li><li class="listitem"><p class="simpara">
						Run the <code class="literal">standalone</code> boot script.
					</p><div class="formalpara"><p class="title"><strong>Linux/Unix</strong></p><p>
							
<pre class="programlisting language-bash">$ cd bin
$ ./standalone.sh</pre>
						</p></div><div class="formalpara"><p class="title"><strong>Windows</strong></p><p>
							
<pre class="programlisting language-bash">&gt; ...\bin\standalone.bat</pre>
						</p></div></li></ol></div></section><section class="section" id="create-admin_"><div class="titlepage"><div><div><h2 class="title">1.3. Creating the admin account</h2></div></div></div><p>
				Before you can use Red Hat Single Sign-On, you need to create an admin account which you use to log in to the Red Hat Single Sign-On admin console.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You saw no errors when you started the Red Hat Single Sign-On server.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open <a class="link" href="http://localhost:8080/auth">http://localhost:8080/auth</a> in your web browser.
					</p><p class="simpara">
						The welcome page opens, confirming that the server is running.
					</p><div class="formalpara"><p class="title"><strong>Welcome page</strong></p><p>
							<span class="inlinemediaobject"><img src="images/welcome.png" alt="Welcome page"/></span>
						</p></div></li><li class="listitem">
						Enter a username and password to create an initial admin user.
					</li></ol></div></section><section class="section" id="logging-in-admin-console_"><div class="titlepage"><div><div><h2 class="title">1.4. Logging into the admin console</h2></div></div></div><p>
				After you create the initial admin account, you can log in to the admin console. In this console, you add users and register applications to be secured by Red Hat Single Sign-On.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have an admin account for the admin console.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Click the <span class="strong strong"><strong>Administration Console</strong></span> link on the <span class="strong strong"><strong>Welcome</strong></span> page or go directly to <a class="link" href="http://localhost:8080/auth/admin/">http://localhost:8080/auth/admin/</a> (the console URL).
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The Administration Console is generally referred to as the admin console for short in Red Hat Single Sign-On documentation.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Enter the username and password you created on the <span class="strong strong"><strong>Welcome</strong></span> page to open the <span class="strong strong"><strong>admin console</strong></span>.
					</p><div class="formalpara"><p class="title"><strong>Admin console login screen</strong></p><p>
							<span class="inlinemediaobject"><img src="images/admin-login.png" alt="Admin console login screen"/></span>
						</p></div><p class="simpara">
						The initial screen for the admin console appears.
					</p><div class="formalpara"><p class="title"><strong>Admin console</strong></p><p>
							<span class="inlinemediaobject"><img src="images/admin-console.png" alt="Admin console"/></span>
						</p></div></li></ol></div><div class="formalpara"><p class="title"><strong>Next steps</strong></p><p>
					Now that you can log into the admin console, you can begin creating realms where administrators can create users and give them access to applications. For more details, see <a class="link" href="#creating-first-realm_" title="Chapter 2. Creating a realm and a user">Creating a realm and a user</a>.
				</p></div></section></section><section class="chapter" id="creating-first-realm_"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Creating a realm and a user</h1></div></div></div><p>
			The first use of the Red Hat Single Sign-On admin console is to create a realm and create a user in that realm. You use that user to log in to your new realm and visit the built-in account console, to which all users have access.
		</p><section class="section" id="realms-apps_"><div class="titlepage"><div><div><h2 class="title">2.1. Realms and users</h2></div></div></div><p>
				When you log in to the admin console, you work in a realm, which is a space where you manage objects. Two types of realms exist:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">Master realm</code> - This realm was created for you when you first started Red Hat Single Sign-On. It contains the admin account you created at the first login. You use this realm only to create other realms.
					</li><li class="listitem">
						<code class="literal">Other realms</code> - These realms are created by the admin in the master realm. In these realms, administrators create users and applications. The applications are owned by the users.
					</li></ul></div><p>
				<span class="inlinemediaobject"><img src="images/master_realm.png" alt="Realms and applications"/></span>
			</p></section><section class="section" id="create-realm_"><div class="titlepage"><div><div><h2 class="title">2.2. Creating a realm</h2></div></div></div><p>
				As the admin in the master realm, you create the realms where administrators create users and applications.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Red Hat Single Sign-On is installed.
					</li><li class="listitem">
						You have the initial admin account for the admin console.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Go to <a class="link" href="http://localhost:8080/auth/admin/">http://localhost:8080/auth/admin/</a> and log in to the Red Hat Single Sign-On admin console using the admin account.
					</li><li class="listitem">
						From the <span class="strong strong"><strong>Master</strong></span> menu, click <span class="strong strong"><strong>Add Realm</strong></span>. When you are logged in to the master realm, this menu lists all other realms.
					</li><li class="listitem"><p class="simpara">
						Type <code class="literal">demo</code> in the <span class="strong strong"><strong>Name</strong></span> field.
					</p><div class="formalpara"><p class="title"><strong>A new realm</strong></p><p>
							<span class="inlinemediaobject"><img src="images/add-demo-realm.png" alt="A new realm"/></span>
						</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The realm name is case-sensitive, so make note of the case that you use.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create</strong></span>.
					</p><p class="simpara">
						The main admin console page opens with realm set to <code class="literal">demo</code>.
					</p><div class="formalpara"><p class="title"><strong>Demo realm</strong></p><p>
							<span class="inlinemediaobject"><img src="images/demo-realm.png" alt="Demo realm"/></span>
						</p></div></li><li class="listitem">
						Switch between managing the <code class="literal">master</code> realm and the realm you just created by clicking entries in the <span class="strong strong"><strong>Select realm</strong></span> drop-down list.
					</li></ol></div></section><section class="section" id="create-user_"><div class="titlepage"><div><div><h2 class="title">2.3. Creating a user</h2></div></div></div><p>
				In the <code class="literal">demo</code> realm, you create a new user and a temporary password for that new user.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						From the menu, click <span class="strong strong"><strong>Users</strong></span> to open the user list page.
					</li><li class="listitem">
						On the right side of the empty user list, click <span class="strong strong"><strong>Add User</strong></span> to open the Add user page.
					</li><li class="listitem"><p class="simpara">
						Enter a name in the <code class="literal">Username</code> field.
					</p><p class="simpara">
						This is the only required field.
					</p><div class="formalpara"><p class="title"><strong>Add user page</strong></p><p>
							<span class="inlinemediaobject"><img src="images/add-user.png" alt="Add user page"/></span>
						</p></div></li><li class="listitem"><p class="simpara">
						Flip the <span class="strong strong"><strong>Email Verified</strong></span> switch to <span class="strong strong"><strong>On</strong></span> and click <span class="strong strong"><strong>Save</strong></span>.
					</p><p class="simpara">
						The management page for the new user opens.
					</p></li><li class="listitem">
						Click the <span class="strong strong"><strong>Credentials</strong></span> tab to set a temporary password for the new user.
					</li><li class="listitem">
						Type a new password and confirm it.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Set Password</strong></span> to set the user password to the new one you specified.
					</p><div class="formalpara"><p class="title"><strong>Manage Credentials page</strong></p><p>
							<span class="inlinemediaobject"><img src="images/user-credentials.png" alt="Manage Credentials page"/></span>
						</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							This password is temporary and the user will be required to change it at the first login. If you prefer to create a password that is persistent, flip the <span class="strong strong"><strong>Temporary</strong></span> switch to <span class="strong strong"><strong>Off</strong></span> and click <span class="strong strong"><strong>Set Password</strong></span>.
						</p></div></div></li></ol></div></section><section class="section" id="view-account_"><div class="titlepage"><div><div><h2 class="title">2.4. Logging into the Account Console</h2></div></div></div><p>
				Every user in a realm has access to the account console. You use this console to update your profile information and change your credentials. You can now test logging in with that user in the realm that you created.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Log out of the admin console by opening the user menu and selecting <span class="strong strong"><strong>Sign Out</strong></span>.
					</li><li class="listitem">
						Go to <a class="link" href="http://localhost:8080/auth/realms/demo/account">http://localhost:8080/auth/realms/demo/account</a> and log in to your <code class="literal">demo</code> realm as the user that you just created.
					</li><li class="listitem"><p class="simpara">
						When you are asked to supply a new password, enter a password that you can remember.
					</p><div class="formalpara"><p class="title"><strong>Update password</strong></p><p>
							<span class="inlinemediaobject"><img src="images/update-password.png" alt="Update password"/></span>
						</p></div><p class="simpara">
						The account console opens for this user.
					</p><div class="formalpara"><p class="title"><strong>Account console</strong></p><p>
							<span class="inlinemediaobject"><img src="images/account-console.png" alt="account console"/></span>
						</p></div></li><li class="listitem">
						Complete the required fields with any values to test using this page.
					</li></ol></div><div class="formalpara"><p class="title"><strong>Next steps</strong></p><p>
					You are now ready for the final procedure, which is to secure a sample application that runs on JBoss EAP. See <a class="link" href="#securing-sample-app_" title="Chapter 3. Securing a sample application">Securing a sample application</a>.
				</p></div></section></section><section class="chapter" id="securing-sample-app_"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Securing a sample application</h1></div></div></div><p>
			Now that you have an admin account, a realm, and a user, you can use Red Hat Single Sign-On to secure a sample JBoss EAP servlet application. You install a JBoss EAP client adapter, register the application in the admin console, modify the JBoss EAP instance to work with Red Hat Single Sign-On, and use Red Hat Single Sign-On with some sample code to secure the application.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You need to adjust the port used by Red Hat Single Sign-On to avoid port conflicts with JBoss EAP.
				</li></ul></div><section class="section" id="adjusting-ports_"><div class="titlepage"><div><div><h2 class="title">3.1. Adjusting the port used by Red Hat Single Sign-On</h2></div></div></div><p>
				The instructions in this guide apply to running JBoss EAP on the same machine as the Red Hat Single Sign-On server. In this situation, even though JBoss EAP is bundled with Red Hat Single Sign-On, you cannot use JBoss EAP as an application container. You must run a separate JBoss EAP instance for your servlet application.
			</p><p>
				To avoid port conflicts, you need different ports to run Red Hat Single Sign-On and JBoss EAP.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have an admin account for the admin console.
					</li><li class="listitem">
						You created a demo realm.
					</li><li class="listitem">
						You created a user in the demo realm.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Download JBoss EAP 7.3 from the <a class="link" href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?product=appplatform&amp;downloadType=distributions">Red Hat customer portal</a>.
					</li><li class="listitem"><p class="simpara">
						Unzip the downloaded JBoss EAP.
					</p><pre class="programlisting language-bash">$ unzip &lt;filename&gt;.zip</pre></li><li class="listitem">
						Change to the Red Hat Single Sign-On root directory.
					</li><li class="listitem"><p class="simpara">
						Start the Red Hat Single Sign-On server by supplying a value for the <code class="literal">jboss.socket.binding.port-offset</code> system property. This value is added to the base value of every port opened by the Red Hat Single Sign-On server. In this example, <span class="strong strong"><strong>100</strong></span> is the value.
					</p><div class="formalpara"><p class="title"><strong>Linux/Unix</strong></p><p>
							
<pre class="programlisting language-bash">$ cd bin
$ ./standalone.sh -Djboss.socket.binding.port-offset=100</pre>
						</p></div><div class="formalpara"><p class="title"><strong>Windows</strong></p><p>
							
<pre class="programlisting language-bash">&gt; ...\bin\standalone.bat -Djboss.socket.binding.port-offset=100</pre>
						</p></div></li><li class="listitem"><p class="simpara">
						Confirm that the Red Hat Single Sign-On server is running. Go to <a class="link" href="http://localhost:8180/auth/admin/">http://localhost:8180/auth/admin/</a> .
					</p><p class="simpara">
						If the admin console opens, you are ready to install a client adapter that enables JBoss EAP to work with Red Hat Single Sign-On.
					</p></li></ol></div></section><section class="section" id="installing-client-adapter_"><div class="titlepage"><div><div><h2 class="title">3.2. Installing the JBoss EAP client adapter</h2></div></div></div><p>
				When JBoss EAP and Red Hat Single Sign-On are installed on the same machine, JBoss EAP requires some modification. To make this modification, you install a Red Hat Single Sign-On client adapter.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						JBoss EAP is installed.
					</li><li class="listitem">
						You have a backup of the <code class="literal">../standalone/configuration/standalone.xml</code> file if you have customized this file.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Download the <span class="strong strong"><strong>Client Adapter for EAP 7</strong></span> from the <a class="link" href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html?downloadType=distributions&amp;product=core.service.rhsso">Red Hat customer portal</a>.
					</li><li class="listitem">
						Change to the root directory of JBoss EAP.
					</li><li class="listitem"><p class="simpara">
						Unzip the downloaded client adapter in this directory. For example:
					</p><pre class="programlisting language-bash">$ unzip &lt;filename&gt;.zip</pre></li><li class="listitem"><p class="simpara">
						Change to the bin directory.
					</p><pre class="programlisting language-bash">$ cd bin</pre></li><li class="listitem"><p class="simpara">
						Run the appropriate script for your platform.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							If you receive a <code class="literal">file not found</code>, make sure that you used <code class="literal">unzip</code> in the previous step. This method of extraction installs the files in the right place.
						</p></div></div><div class="formalpara"><p class="title"><strong>Linux/Unix</strong></p><p>
							
<pre class="programlisting language-bash">$ ./jboss-cli.sh --file=adapter-elytron-install-offline.cli</pre>
						</p></div><div class="formalpara"><p class="title"><strong>Windows</strong></p><p>
							
<pre class="programlisting language-bash">&gt; jboss-cli.bat --file=adapter-elytron-install-offline.cli</pre>
						</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							This script makes the necessary edits to the <code class="literal">…​/standalone/configuration/standalone.xml</code> file.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Start the application server.
					</p><div class="formalpara"><p class="title"><strong>Linux/Unix</strong></p><p>
							
<pre class="programlisting language-bash">$ ./standalone.sh</pre>
						</p></div><div class="formalpara"><p class="title"><strong>Windows</strong></p><p>
							
<pre class="programlisting language-bash">&gt; ...\standalone.bat</pre>
						</p></div></li></ol></div></section><section class="section" id="registering-app_"><div class="titlepage"><div><div><h2 class="title">3.3. Registering the JBoss EAP application</h2></div></div></div><p>
				You can now define and register the client in the Red Hat Single Sign-On admin console.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You installed a client adapter to work with JBoss EAP.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Log in to the admin console with your admin account: <a class="link" href="http://localhost:8180/auth/admin/">http://localhost:8180/auth/admin/</a>
					</li><li class="listitem">
						In the top left drop-down list, select the <code class="literal">Demo</code> realm.
					</li><li class="listitem"><p class="simpara">
						Click <code class="literal">Clients</code> in the left side menu to open the Clients page.
					</p><div class="formalpara"><p class="title"><strong>Clients</strong></p><p>
							<span class="inlinemediaobject"><img src="images/clients.png" alt="Clients"/></span>
						</p></div></li><li class="listitem">
						On the right side, click <span class="strong strong"><strong>Create</strong></span>.
					</li><li class="listitem"><p class="simpara">
						On the Add Client dialog, create a client called <span class="strong strong"><strong>vanilla</strong></span> by completing the fields as shown below:
					</p><div class="formalpara"><p class="title"><strong>Add Client</strong></p><p>
							<span class="inlinemediaobject"><img src="images/add-client.png" alt="Add Client"/></span>
						</p></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Save</strong></span>.
					</li><li class="listitem">
						On the <span class="strong strong"><strong>Vanilla</strong></span> client page that appears, click the <span class="strong strong"><strong>Installation</strong></span> tab.
					</li><li class="listitem"><p class="simpara">
						Select <span class="strong strong"><strong>Keycloak OIDC JSON</strong></span> to generate a file that you need in a later procedure.
					</p><div class="formalpara"><p class="title"><strong>Keycloak.json file</strong></p><p>
							<span class="inlinemediaobject"><img src="images/keycloak-json.png" alt="Keycloak.json file"/></span>
						</p></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Download</strong></span> to save <span class="strong strong"><strong>Keycloak.json</strong></span> in a location that you can find later.
					</li><li class="listitem"><p class="simpara">
						Select <span class="strong strong"><strong>Keycloak OIDC JBoss Subsystem XML</strong></span> to generate an XML template.
					</p><div class="formalpara"><p class="title"><strong>Template XML</strong></p><p>
							<span class="inlinemediaobject"><img src="images/client-install-selected.png" alt="Template XML"/></span>
						</p></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Download</strong></span> to save a copy for use in the next procedure, which involves JBoss EAP configuration.
					</li></ol></div></section><section class="section" id="modifying-app_"><div class="titlepage"><div><div><h2 class="title">3.4. Modifying the JBoss EAP instance</h2></div></div></div><p>
				The JBoss EAP servlet application requires additional configuration before it is secured by Red Hat Single Sign-On.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You created a client named <span class="strong strong"><strong>vanilla</strong></span> in the <span class="strong strong"><strong>demo</strong></span> realm.
					</li><li class="listitem">
						You saved a template XML file for this client.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Go to the <code class="literal">standalone/configuration</code> directory in your JBoss EAP root directory.
					</li><li class="listitem"><p class="simpara">
						Open the <code class="literal">standalone.xml</code> file and search for the following text:
					</p><pre class="programlisting language-xml">&lt;subsystem xmlns="urn:jboss:domain:keycloak:1.1"/&gt;</pre></li><li class="listitem"><p class="simpara">
						Change the XML entry from self-closing to using a pair of opening and closing tags as shown here:
					</p><pre class="programlisting language-xml">&lt;subsystem xmlns="urn:jboss:domain:keycloak:1.1"&gt;
&lt;/subsystem&gt;</pre></li><li class="listitem"><p class="simpara">
						Paste the contents of the XML template within the <code class="literal">&lt;subsystem&gt;</code> element, as shown in this example:
					</p><pre class="programlisting language-xml">&lt;subsystem xmlns="urn:jboss:domain:keycloak:1.1"&gt;
  &lt;secure-deployment name="WAR MODULE NAME.war"&gt;
    &lt;realm&gt;demo&lt;/realm&gt;
    &lt;auth-server-url&gt;http://localhost:8180/auth&lt;/auth-server-url&gt;
    &lt;public-client&gt;true&lt;/public-client&gt;
    &lt;ssl-required&gt;EXTERNAL&lt;/ssl-required&gt;
    &lt;resource&gt;vanilla&lt;/resource&gt;
  &lt;/secure-deployment&gt;
&lt;/subsystem&gt;</pre></li><li class="listitem"><p class="simpara">
						Change <code class="literal">WAR MODULE NAME.war</code> to <code class="literal">vanilla.war</code>:
					</p><pre class="programlisting language-xml">&lt;subsystem xmlns="urn:jboss:domain:keycloak:1.1"&gt;
  &lt;secure-deployment name="vanilla.war"&gt;
  ...
&lt;/subsystem&gt;</pre></li><li class="listitem">
						Reboot the application server.
					</li></ol></div></section><section class="section" id="installing-sample-code_"><div class="titlepage"><div><div><h2 class="title">3.5. Installing sample code to secure the application</h2></div></div></div><p>
				The final procedure is to make this application secure by installing some sample code from the <a class="link" href="https://github.com/redhat-developer/redhat-sso-quickstarts">https://github.com/redhat-developer/redhat-sso-quickstarts</a> repository. The quickstarts work with the most recent Red Hat Single Sign-On release.
			</p><p>
				The sample code is the <span class="strong strong"><strong>app-profile-jee-vanilla</strong></span> quickstart. It demonstrates how to change a JavaEE application that is secured with basic authentication without changing the WAR. The Red Hat Single Sign-On client adapter subsystem changes the authentication method and injects the configuration.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					You have the following installed on your machine and available in your PATH.
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Java JDK 8
					</li><li class="listitem">
						Apache Maven 3.1.1 or higher
					</li><li class="listitem">
						Git
					</li></ul></div><p>
				You have a <span class="strong strong"><strong>keycloak.json</strong></span> file.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Make sure your JBoss EAP application server is started.
					</li><li class="listitem"><p class="simpara">
						Download the code and change directories using the following commands.
					</p><pre class="screen">$ git clone https://github.com/redhat-developer/redhat-sso-quickstarts
$ cd redhat-sso-quickstarts/app-profile-jee-vanilla/config</pre></li><li class="listitem">
						Copy the <code class="literal">keycloak.json</code> file to the current directory.
					</li><li class="listitem">
						Move one level up to the <code class="literal">app-profile-jee-vanilla</code> directory.
					</li><li class="listitem"><p class="simpara">
						Install the code using the following command.
					</p><pre class="screen">$ mvn clean wildfly:deploy</pre></li><li class="listitem"><p class="simpara">
						Confirm that the application installationt succeeded. Go to <a class="link" href="http://localhost:8080/vanilla">http://localhost:8080/vanilla</a> where a login page is displayed.
					</p><div class="formalpara"><p class="title"><strong>Login page confirming success</strong></p><p>
							<span class="inlinemediaobject"><img src="images/vanilla.png" alt="Login page confirming success"/></span>
						</p></div></li><li class="listitem"><p class="simpara">
						Log in using the account that you created in the demo realm.
					</p><div class="formalpara"><p class="title"><strong>Login page to demo realm</strong></p><p>
							<span class="inlinemediaobject"><img src="images/demo-login.png" alt="Login page to demo realm"/></span>
						</p></div><p class="simpara">
						A message appears indicating you have completed a successful use of Red Hat Single Sign-On to protect a sample JBoss EAP application. Congratulations!
					</p><div class="formalpara"><p class="title"><strong>Complete success</strong></p><p>
							<span class="inlinemediaobject"><img src="images/success.png" alt="Complete success"/></span>
						</p></div></li></ol></div></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140607381444672"><h1 class="legalnotice">Legal Notice</h1><div class="para">
				Copyright <span class="trademark"/>© 2020 Red Hat, Inc.
			</div><div class="para">
				Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at
			</div><div class="para">
				<a class="ulink" href="http://www.apache.org/licenses/LICENSE-2.0"> http://www.apache.org/licenses/LICENSE-2.0</a>
			</div><div class="para">
				Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
			</div></div></div></div></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>